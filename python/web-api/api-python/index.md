---
metaTitle: Как работать с API в Python
metaDescription: Полное руководство по работе с API в Python — подключение, отправка запросов, обработка данных и примеры использования популярных библиотек.
author: Олег Марков
title: Как работать с API в Python
preview: Разбираем работу с API в Python — подключение, запросы, обработка ответов и полезные библиотеки для интеграции с внешними сервисами.
---

## Введение

API (Application Programming Interface) позволяет программам взаимодействовать друг с другом, получать и отправлять данные между приложениями, сервисами и сервисами в интернете. В Python работа с API обычно связана с отправкой HTTP-запросов, обработкой JSON-ответов и интеграцией с внешними сервисами.
В этой статье мы разберём основные способы работы с API, используемые библиотеки и примеры практического применения в Python.

### Основные принципы работы с API

API — это набор правил и методов, которые позволяют обращаться к сервису, получать данные и выполнять действия. Для взаимодействия с API необходимо:

1. Знать базовый URL и доступные методы (GET, POST, PUT, DELETE).
2. Понимать формат данных (JSON, XML).
3. Использовать ключи доступа или токены, если API требует аутентификации.

В Python для работы с API чаще всего применяют библиотеку `requests`, которая упрощает отправку HTTP-запросов и обработку ответов.

### Подключение и отправка запросов

Простейший пример запроса к API:

```python
import requests

url = "https://jsonplaceholder.typicode.com/posts/1"
response = requests.get(url)

if response.status_code == 200:
    data = response.json()
    print(data)
else:
    print("Ошибка:", response.status_code)
```

Здесь `requests.get()` отправляет GET-запрос, `response.status_code` проверяет статус ответа, а `response.json()` преобразует JSON в Python-словарь для дальнейшей работы.

При работе с API важно понимать обработку ответов, проверку ошибок и обработку исключений. Чтобы глубже изучить интеграции с внешними сервисами и практическое применение Python, рекомендуем курс [Основы Python](https://purpleschool.ru/course/python-basics?utm_source=knowledgebase&utm_medium=article&utm_campaign=Kak_rabotat_s_API_v_Python).
Курс содержит 209 уроков и 34 упражнения, AI-тренажёры для практики 24/7, решение задач с живым ревью наставника и еженедельные встречи с менторами.

### Работа с параметрами и заголовками

Для большинства API необходимо передавать параметры или заголовки:

```python
params = {"userId": 1}
headers = {"Authorization": "Bearer your_token_here"}

response = requests.get("https://jsonplaceholder.typicode.com/posts", params=params, headers=headers)
print(response.json())
```

* **params** — словарь с GET-параметрами запроса.
* **headers** — словарь с заголовками HTTP-запроса, например, для авторизации или указания формата данных.

### Отправка POST-запросов

Для создания данных или отправки информации на сервер используется POST:

```python
payload = {"title": "Новая запись", "body": "Текст поста", "userId": 1}
response = requests.post("https://jsonplaceholder.typicode.com/posts", json=payload)
print(response.status_code)
print(response.json())
```

`json=payload` автоматически преобразует словарь в JSON и отправляет его в теле запроса.

### Частые ошибки

* Игнорирование проверки статуса ответа сервера.
* Отправка некорректных данных или неправильного формата JSON.
* Пренебрежение обработкой исключений (`try/except`) при сетевых ошибках.
* Хранение токенов и ключей в коде вместо переменных окружения.

### Частозадаваемые вопросы

**Какая библиотека лучше для работы с API?**
Для большинства задач достаточно `requests`, для асинхронных запросов используют `aiohttp`.

**Как обрабатывать большие ответы от API?**
Используйте построчное чтение (`iter_lines()`) или пагинацию, если сервис поддерживает.

**Можно ли работать с защищёнными API?**
Да, через заголовки и токены авторизации.

**Как тестировать API без реального сервера?**
С помощью сервисов-заглушек, например JSONPlaceholder или MockAPI.

### Заключение

Работа с API в Python — важный навык для интеграции приложений, обработки внешних данных и автоматизации процессов. Правильная отправка запросов, обработка ответов и использование библиотек упрощают взаимодействие с сервисами.
Использование API делает код более гибким и расширяемым. Для закрепления навыков работы с внешними сервисами и изучения дополнительных возможностей Python рекомендуем курс [Основы Python](https://purpleschool.ru/course/python-basics?utm_source=knowledgebase&utm_medium=article&utm_campaign=Kak_rabotat_s_API_v_Python).
В первых 3 модулях курса доступно бесплатное содержание, что позволяет сразу практиковаться с отправкой запросов, обработкой JSON и параметрами API, а также понять структуру курса до полного изучения.
